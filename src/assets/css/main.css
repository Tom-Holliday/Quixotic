/* ---- Reset ---- */
*,*::before,*::after{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body,h1,h2,h3,h4,h5,h6,p,figure{margin:0}
img,picture,svg,video,canvas{display:block;max-width:100%}
ul[role="list"],ol[role="list"]{list-style:none;margin:0;padding:0}
input,button,textarea,select{font:inherit}
a{color:inherit;text-decoration:none}

/* ---- Design tokens: dark-forward (auto respects system) ---- */
:root{
  /* Dark defaults (sleek) */
  --bg:#0b1220;
  --surface:#0f172a;
  --elev:#111b2e;

  --text:#dce7ff;          /* body copy */
  --text-muted:#a9bff7;    /* meta */
  --text-subtle:#7fa0ef;   /* captions */

  --brand:#3b82f6;         /* interactive blue */
  --brand-contrast:#0b1220;
  --accent:#22d3ee;        /* cyan accent if needed */

  --border:#19263b;
  --border-subtle:#0e1424;

  --focus:#93c5fd;

  --font-sans:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
  --font-headings:"Outfit","Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

  --fs-xxl:clamp(2.1rem,4.4vw + 1rem,3.5rem);
  --fs-xl: clamp(1.6rem,2.6vw + .5rem,2.4rem);
  --fs-lg: 1.35rem;
  --fs-md: 1.12rem;
  --fs-sm: .96rem;

  --container:72rem;
  --radius:16px;
  --radius-sm:12px;
  --shadow-1:0 1px 2px rgba(0,0,0,.25), 0 8px 30px rgba(0,0,0,.25);
  --shadow-2:0 10px 40px rgba(0,0,0,.35);

  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem; --space-4:1rem;
  --space-5:1.5rem; --space-6:2rem; --space-8:3rem;

  --measure:68ch; --ul-off:.15em;
}

/* Light UI (when user forces light) */
:root[data-theme="light"], [data-theme="light"]{
  --bg:#ffffff; --surface:#ffffff; --elev:#f7f8fb;
  --text:#0B3D91; --text-muted:#2C5FB8; --text-subtle:#6B8ACB;
  --brand:#1D4ED8; --brand-contrast:#ffffff;
  --border:#e5e7eb; --border-subtle:#eef0f3; --focus:#93c5fd;
}

/* Auto respect system */
@media (prefers-color-scheme: light){
  :root[data-theme="auto"]{ /* same as [data-theme="light"] */
    --bg:#ffffff; --surface:#ffffff; --elev:#f7f8fb;
    --text:#0B3D91; --text-muted:#2C5FB8; --text-subtle:#6B8ACB;
    --brand:#1D4ED8; --brand-contrast:#ffffff;
    --border:#e5e7eb; --border-subtle:#eef0f3; --focus:#93c5fd;
  }
}

/* ---- Base ---- */
html,body{height:100%;background:var(--bg);color:var(--text)}
body{
  font-family:var(--font-sans); line-height:1.65; font-size:16px;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* ---- Typography ---- */
h1,h2,h3,h4{line-height:1.15;font-weight:800;letter-spacing:-0.015em;font-family:var(--font-headings)}
h1{font-size:var(--fs-xxl);margin:var(--space-6) 0 var(--space-4)}
h2{font-size:var(--fs-xl); margin:var(--space-6) 0 var(--space-3)}
h3{font-size:var(--fs-lg); margin:var(--space-5) 0 var(--space-2)}
h4{font-size:var(--fs-md); margin:var(--space-4) 0 var(--space-2)}
p+ p{margin-top:var(--space-3)}
.lede{font-size:clamp(1.1rem,1.1vw + .95rem,1.35rem);color:var(--text-muted)}
a{color:var(--brand);text-underline-offset:var(--ul-off)}
a:hover{text-decoration-thickness:2px}

/* ---- Layout ---- */
.container{max-width:var(--container);margin-inline:auto;padding-inline:clamp(1rem,4vw,2rem)}
main{display:block}

/* ---- Header (matches .site-head in base.njk) ---- */
.site-head{
  position:sticky;top:0;z-index:50;
  backdrop-filter:saturate(160%) blur(10px);
  background:color-mix(in oklab, var(--surface), transparent 15%);
  border-bottom:1px solid var(--border);
}
.site-head .inner{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding-block:.9rem}
.brand{display:flex;align-items:center;gap:.6rem;color:var(--text);font-weight:800}
.brand-mark{display:inline-grid;place-items:center;width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#7dd3fc);color:var(--brand-contrast);font-weight:900}
.brand-text{font-family:var(--font-headings);letter-spacing:-.02em}

.nav{display:flex;align-items:center;gap:1rem}
.nav a{color:var(--text-muted);font-weight:700}
.nav a:hover{color:var(--brand)}
.theme-toggle{
  display:inline-grid;place-items:center;width:38px;height:34px;border-radius:12px;
  background:color-mix(in oklab,var(--surface),transparent 10%);
  border:1px solid var(--border); color:var(--text);
}

/* ---- Footer ---- */
.site-foot{margin-top:var(--space-8);padding:var(--space-6) 0;color:var(--text-subtle);border-top:1px solid var(--border)}

/* ---- Hero ---- */
/* Layering */
.hero { position: relative; isolation: isolate; }
.hero__media   { position: absolute; inset: 0; z-index: 0; pointer-events: none; }
.hero__overlay { position: absolute; inset: 0; z-index: 1; pointer-events: none; 
  /* soft blue gradient tint; reduce if it hides photo */
  background: linear-gradient(
    to bottom,
    rgba(11, 61, 145, 0.28) 0%,
    rgba(11, 61, 145, 0.14) 45%,
    rgba(11, 61, 145, 0.00) 100%
  );
}
.hero__inner   { position: relative; z-index: 2; }

/* Photo visibility */
.hero__img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: .55;           /* increase if the image looks too faint */
  filter: grayscale(12%);
  display: block;
}

/* Safety: nuke any leftover 3D canvas rules */
.hero__webgl { display: none !important; }

/* Hero core */
.hero { position: relative; isolation: isolate; min-height: clamp(300px, 42vh, 560px); }

/* Photo layer + CSS fallback */
.hero__media {
  position: absolute; inset: 0; z-index: 0; pointer-events: none;
  background-image: var(--hero-src);        /* fallback */
  background-size: cover;
  background-position: center;
}
.hero__img {
  width: 100%; height: 100%; object-fit: cover;
  opacity: .35;           /* raise to .45 if image feels too faint */
  filter: grayscale(12%);
  display: block;
}

/* Blue tint (lighter so it won't hide the photo) */
.hero__overlay {
  position: absolute; inset: 0; z-index: 1; pointer-events: none;
  background: linear-gradient(
    to bottom,
    rgba(11, 61, 145, 0.16) 0%,
    rgba(11, 61, 145, 0.08) 45%,
    rgba(11, 61, 145, 0.00) 100%
  );
}

/* Foreground card */
.hero__inner { position: relative; z-index: 2; }
.hero__intro {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  padding: clamp(1.25rem, 2vw, 2rem);
  max-width: min(48rem, 90%);
}
.hero__title { margin: 0 0 .4rem; }
.hero__tag { margin: 0; color: var(--text); }
.hero__cite { margin-top: .9rem; color: var(--text-subtle); font-style: italic; }

/* Ensure any leftover 3D host is hidden */
.hero__webgl { display: none !important; }



/* ---- Cards / Grid ---- */
.card-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:var(--space-5)}
.card-grid>*{grid-column:span 4}
@media (max-width:1000px){.card-grid>*{grid-column:span 6}}
@media (max-width:640px){.card-grid>*{grid-column:span 12}}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-1);display:flex;flex-direction:column;height:100%}
.card a{text-decoration:none}
.card-cover{aspect-ratio:16/9;background:var(--elev);overflow:hidden}
.card-cover img{width:100%;height:100%;object-fit:cover}
.card-body{padding:1rem;display:grid;gap:.5rem}
.card-title{font-weight:800;font-size:1.125rem;color:var(--text)}
.card-meta{color:var(--text-subtle);font-size:.95rem}

/* ---- Article / Prose ---- */
.post{margin:var(--space-6) 0}
.post-header .meta{color:var(--text-subtle);font-size:.95rem}
.post .content{max-width:var(--measure)}
.post .content>*+*{margin-top:1.1em}
.post .content blockquote{border-left:3px solid var(--border);margin:1rem 0;padding:.75rem 1rem;background:color-mix(in oklab,var(--elev),transparent 30%);color:var(--text-muted)}

/* ---- Utilities ---- */
.meta{color:var(--text-subtle);font-size:.95rem}
.divider{height:1px;background:var(--border);margin:var(--space-6) 0}
.btn{display:inline-flex;align-items:center;gap:.5rem;background:var(--brand);color:var(--brand-contrast);border-radius:var(--radius-sm);padding:.55rem .9rem;font-weight:700}
.btn.secondary{background:var(--elev);color:var(--text);border:1px solid var(--border)}

/* --- Homepage clean-up (REPLACED) --- */

/* Hide brand text on the homepage (keep the Q badge) */
.is-home .brand-text,
.is-home .site-head .brand strong {
  display: none !important;
}

/* Make header solid so it doesnâ€™t visually stack over the hero */
.site-head {
  background: var(--surface) !important;
  border-bottom: 1px solid var(--border) !important;
  box-shadow: none !important;
}

/* Slightly stronger card contrast, tighter hero spacing */
.hero__intro { box-shadow: 0 10px 30px rgba(0,0,0,.18); }
.hero__img { opacity: .28; }  /* pull a bit more image detail in */
.hero__overlay {
  background: linear-gradient(
    to bottom,
    rgba(11, 61, 145, 0.32) 0%,
    rgba(11, 61, 145, 0.16) 45%,
    rgba(11, 61, 145, 0.00) 100%
  );
}

/* Global typography polish */
h1, h2, h3, h4 { letter-spacing: -0.02em; }
.lede, .hero__tag { color: var(--text); } /* keep hero copy same blue as site */
