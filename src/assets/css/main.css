/* ========================================================================== */
/* Reset                                                                      */
/* ========================================================================== */
*,*::before,*::after{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body,h1,h2,h3,h4,h5,h6,p,figure{margin:0}
img,picture,svg,video,canvas{display:block;max-width:100%}
ul[role="list"],ol[role="list"]{list-style:none;margin:0;padding:0}
input,button,textarea,select{font:inherit}
a{color:inherit;text-decoration:none}

/* ========================================================================== */
/* Design Tokens — Dark is default                                            */
/* ========================================================================== */
:root {
  /* Surfaces */
  --bg:#0b1220;
  --surface:#0f172a;
  --elev:#111b2e;

  /* Text */
  --text:#dce7ff;
  --text-muted:#a9bff7;
  --text-subtle:#7fa0ef;

  /* Brand */
  --brand:#3b82f6;           /* royal blue */
  --brand-contrast:#0b1220;
  --accent:#22d3ee;          /* cyan accent */

  /* Lines / focus */
  --border:#19263b;
  --border-subtle:#0e1424;
  --focus:#93c5fd;

  /* Type / scale */
  --font-sans:"Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
  --font-headings:"Outfit","Inter",ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

  --fs-xxl:clamp(2.1rem,4.4vw + 1rem,3.5rem);
  --fs-xl: clamp(1.6rem,2.6vw + .5rem,2.4rem);
  --fs-lg: 1.35rem;
  --fs-md: 1.12rem;
  --fs-sm: .96rem;

  /* Layout */
  --container:72rem;
  --radius:16px;
  --radius-sm:12px;
  --shadow-1:0 1px 2px rgba(0,0,0,.25), 0 8px 30px rgba(0,0,0,.25);
  --shadow-2:0 10px 40px rgba(0,0,0,.35);

  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem; --space-4:1rem;
  --space-5:1.5rem; --space-6:2rem; --space-8:3rem;

  --measure:68ch; --ul-off:.15em;
}

/* Light Mode — darker/slate grey */
html[data-theme="light"]{
  --bg:#e5e7eb;        /* slate-200 */
  --surface:#d1d5db;   /* slate-300 */
  --elev:#cbd5e1;      /* slate-300/400 */
  --text:#111827;      /* slate-900 */
  --text-muted:#374151;/* slate-700 */
  --text-subtle:#4b5563;/* slate-600 */
  --brand:#1d4ed8;     /* royal blue */
  --brand-contrast:#ffffff;
  --accent:#0ea5e9;    /* brighter cyan for light */
  --border:#9ca3af;    /* slate-400 */
  --border-subtle:#d1d5db;
  --focus:#93c5fd;
}

/* ========================================================================== */
/* Base                                                                       */
/* ========================================================================== */
html,body{height:100%}
body{
  background:var(--bg);
  color:var(--text);
  font-family:var(--font-sans);
  line-height:1.65;
  font-size:16px;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

a{color:var(--brand);text-underline-offset:var(--ul-off)}
a:hover{text-decoration-thickness:2px}

/* ========================================================================== */
/* Typography                                                                 */
/* ========================================================================== */
h1,h2,h3,h4{line-height:1.15;font-weight:800;letter-spacing:-0.015em;font-family:var(--font-headings)}
h1{font-size:var(--fs-xxl);margin:var(--space-6) 0 var(--space-4)}
h2{font-size:var(--fs-xl); margin:var(--space-6) 0 var(--space-3)}
h3{font-size:var(--fs-lg); margin:var(--space-5) 0 var(--space-2)}
h4{font-size:var(--fs-md); margin:var(--space-4) 0 var(--space-2)}
p + p{margin-top:var(--space-3)}
.lede{font-size:clamp(1.1rem,1.1vw + .95rem,1.35rem);color:var(--text-muted)}
h1, h2, h3, h4 { letter-spacing:-0.02em; }

/* ========================================================================== */
/* Layout                                                                     */
/* ========================================================================== */
.container{max-width:var(--container);margin-inline:auto;padding-inline:clamp(1rem,4vw,2rem)}
main{display:block}

/* ========================================================================== */
/* Header                                                                     */
/* ========================================================================== */
.site-head{
  position:sticky;top:0;z-index:50;
  backdrop-filter:saturate(160%) blur(10px);
  background:color-mix(in oklab, var(--surface), transparent 15%);
  border-bottom:1px solid var(--border);
}
.site-head .inner{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding-block:.9rem}

.brand{display:flex;align-items:center;gap:.6rem;color:var(--text);font-weight:800}
.brand-logo{width:34px;height:34px;border-radius:var(--radius-sm);object-fit:cover;display:block}
.brand-text{font-family:var(--font-headings);letter-spacing:-.02em}

.nav{display:flex;align-items:center;gap:1rem}
.nav a{color:var(--text-muted);font-weight:700}
.nav a:hover{color:var(--brand)}
.theme-toggle{
  display:inline-grid;place-items:center;width:38px;height:34px;border-radius:12px;
  background:color-mix(in oklab,var(--surface),transparent 10%);
  border:1px solid var(--border); color:var(--text);
}

/* Adaptive header tints */
html[data-theme="light"] .site-head{
  background: color-mix(in oklab, var(--surface) 95%, white 5%);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
}
html[data-theme="dark"] .site-head{
  background: color-mix(in oklab, var(--surface) 90%, black 10%);
  box-shadow: none;
}

/* Hide brand text on the homepage */
.is-home .brand-text{display:none!important}

/* ========================================================================== */
/* Footer                                                                     */
/* ========================================================================== */
.site-foot{margin-top:var(--space-8);padding:var(--space-6) 0;color:var(--text-subtle);border-top:1px solid var(--border)}

/* ========================================================================== */
/* Hero                                                                       */
/* ========================================================================== */
.hero{position:relative;isolation:isolate;min-height:clamp(300px,42vh,560px)}
.hero__media{position:absolute;inset:0;z-index:0;pointer-events:none}
.hero__overlay{position:absolute;inset:0;z-index:1;pointer-events:none}
.hero__inner{position:relative;z-index:2}

/* Photo layer */
.hero__img{
  width:100%;height:100%;object-fit:cover;display:block;
  opacity:.35;
  filter:saturate(1.05) contrast(1.08) brightness(1.05) grayscale(12%);
}

/* Overlay (theme-adaptive) */
html[data-theme="dark"] .hero__overlay {
  background: linear-gradient(
    to bottom,
    rgba(11,61,145,.20) 0%,   /* was .32 */
    rgba(11,61,145,.10) 45%,  /* was .16 */
    rgba(11,61,145,0) 100%
  );
}

html[data-theme="light"] .hero__overlay {
  background: linear-gradient(
    to bottom,
    rgba(17,24,39,.12) 0%,    /* was .18 */
    rgba(17,24,39,.05) 40%,   /* was .08 */
    rgba(17,24,39,0) 100%
  );
}

/* 1) Let the photo show more */
.hero__img {
  opacity: .65;                 /* was ~.35; lift the image */
  filter: contrast(1.05) saturate(1.02); /* keep it crisp, less gray wash */
}

/* 2) Soften/brighten the full-bleed gradient overlay */
html[data-theme="dark"] .hero__overlay {
  background: linear-gradient(to bottom,
    rgba(11,61,145,.14) 0%,
    rgba(11,61,145,.07) 45%,
    rgba(11,61,145,0)   100%
  ); /* lighter than before */
}
html[data-theme="light"] .hero__overlay {
  background: linear-gradient(to bottom,
    rgba(17,24,39,.08) 0%,
    rgba(17,24,39,.04) 40%,
    rgba(17,24,39,0)   100%
  );
}

/* 3) Make the TITLE BOX (“overlay” in your wording) translucent glass */
.hero__intro {
  /* translucent background instead of solid */
  background: color-mix(in oklab, var(--surface) 75%, transparent 25%);
  /* if color-mix isn’t supported in a browser, this rgba fallback helps */
  background: rgba( var(--_intro-r,15), var(--_intro-g,23), var(--_intro-b,42), .75 );
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);

  border: 1px solid color-mix(in oklab, var(--border) 70%, transparent 30%);
  box-shadow: 0 10px 30px rgba(0,0,0,.16);
}

/* 3a) Provide per-theme fallback RGB for the rgba() line above */
html[data-theme="dark"] {
  --_intro-r: 15;  --_intro-g: 23;  --_intro-b: 42;   /* ~var(--surface) */
}
html[data-theme="light"] {
  --_intro-r: 209; --_intro-g: 213; --_intro-b: 219;  /* ~var(--surface) in slate mode */
}


/* Foreground card */
.hero__intro{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow-1);
  padding:clamp(1.25rem,2vw,2rem);
  max-width:min(48rem,90%);
}
.hero__title{margin:0 0 .4rem}
.hero__tag{margin:0;color:var(--text)}
.hero__cite{margin-top:.9rem;color:var(--text-subtle);font-style:italic}

/* ========================================================================== */
/* Cards / Grid                                                               */
/* ========================================================================== */
.card-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:var(--space-5)}
.card-grid>*{grid-column:span 4}
@media (max-width:1000px){.card-grid>*{grid-column:span 6}}
@media (max-width:640px){.card-grid>*{grid-column:span 12}}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-1);display:flex;flex-direction:column;height:100%}
.card a{text-decoration:none}
.card-cover{aspect-ratio:16/9;background:var(--elev);overflow:hidden}
.card-cover img{width:100%;height:100%;object-fit:cover}
.card-body{padding:1rem;display:grid;gap:.5rem}
.card-title{font-weight:800;font-size:1.125rem;color:var(--text)}
.card-meta{color:var(--text-subtle);font-size:.95rem}

/* ========================================================================== */
/* Article / Prose                                                            */
/* ========================================================================== */
.post{margin:var(--space-6) 0}
.post-header .meta{color:var(--text-subtle);font-size:.95rem}
.post .content{max-width:var(--measure)}
.post .content>*+*{margin-top:1.1em}
.post .content blockquote{
  border-left:3px solid var(--border);
  margin:1rem 0;padding:.75rem 1rem;
  background:color-mix(in oklab,var(--elev),transparent 30%);
  color:var(--text-muted)
}

/* ========================================================================== */
/* Utilities                                                                  */
/* ========================================================================== */
.meta{color:var(--text-subtle);font-size:.95rem}
.divider{height:1px;background:var(--border);margin:var(--space-6) 0}
.btn{display:inline-flex;align-items:center;gap:.5rem;background:var(--brand);color:var(--brand-contrast);border-radius:var(--radius-sm);padding:.55rem .9rem;font-weight:700}
.btn.secondary{background:var(--elev);color:var(--text);border:1px solid var(--border)}

/* ==== HERO VISIBILITY: force the photo through ==== */

/* 1) Make sure the image itself is fully visible */
.hero__img{
  opacity: 1 !important;
  filter: contrast(1.05) saturate(1.02) !important; /* optional polish */
}

/* 2) Temporarily nuke the gradient overlay (debug). 
   If this makes the photo pop, you can re-enable with the lighter versions below. */
.hero__overlay{ background: none !important; }

/* 3) Make the TITLE BOX (your “overlay”) actually translucent using rgba fallbacks
      (no color-mix, so it works everywhere) */
.hero__intro{
  /* DARK MODE glass card */
  background-color: rgba(15, 23, 42, 0.42) !important;   /* ~ var(--surface) @ 42% */
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  box-shadow: 0 10px 30px rgba(0,0,0,.18);
  background-clip: padding-box;
}

/* LIGHT MODE glass card (slate) */
html[data-theme="light"] .hero__intro{
  background-color: rgba(209, 213, 219, 0.38) !important; /* ~ slate-300 @ 38% */
  border-color: rgba(17, 24, 39, 0.14) !important;         /* subtle dark border */
}

/* keep layers correct */
.hero__media{ z-index:0; }
.hero__overlay{ z-index:1; }
.hero__inner{ z-index:2; }
