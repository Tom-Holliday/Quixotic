---
permalink: /feed.xml
layout: false
eleventyExcludeFromCollections: true
---
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>{{ (metadata.title or 'Quixotic') | escape }}</title>
    <link>{{ (metadata.url or 'https://www.quixotic.blog') }}</link>
    <description>{{ (metadata.description or 'Latest posts from Quixotic') | escape }}</description>
    <language>en</language>
    <atom:link href="{{ (metadata.url or 'https://www.quixotic.blog') }}/feed.xml" rel="self" type="application/rss+xml" />

    {# Emit up to 25 items: any page with tag "post" and not draft #}
    {%- set siteUrl = metadata.url or 'https://www.quixotic.blog' -%}
    {%- set MAX = 25 -%}
    {%- set emitted = 0 -%}
    {%- for p in collections.all | reverse -%}
      {%- if emitted >= MAX -%}{% break %}{%- endif -%}
      {%- set tags = p.data.tags or [] -%}
      {%- set isDraft = p.data.draft in [true, "true", "yes", "1"] -%}
      {%- if ("post" in tags) and (not isDraft) -%}
    <item>
      <title>{{ (p.data.title or 'Untitled') | striptags | escape }}</title>
      <link>{{ p.url | absoluteUrl(siteUrl) }}</link>
      <guid isPermaLink="true">{{ p.url | absoluteUrl(siteUrl) }}</guid>
      {%- if p.date -%}<pubDate>{{ p.date | dateToRfc822 }}</pubDate>{%- endif -%}
      <description><![CDATA[
{{ (p.templateContent or '') | replace(']]>', ']]]]><![CDATA[>') }}
      ]]></description>
    </item>
      {%- set emitted = emitted + 1 -%}
      {%- endif -%}
    {%- endfor -%}
  </channel>
</rss>
