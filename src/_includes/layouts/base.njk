<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{{ title or metadata.title }}</title>

  <link rel="stylesheet" href="{{ '/assets/css/main.css' | url }}?v={{ collections.all | length }}">
</head>

{% set isHome = (page.url == '/' or page.url == '/index.html' or page.filePathStem == '/index') %}

<body class="{{ bodyClass or '' }} {% if isHome %}is-home{% endif %}">
  <header class="site-head">
    <div class="inner container">
      <a href="/" class="brand" aria-label="{{ metadata.title or 'Quixotic' }}">
        <img
          class="brand-logo"
          src="{{ '/img/logo.png' | url }}"
          alt="{{ metadata.title or 'Quixotic' }}"
          width="40"
          height="40"
          
        >
        {% if not isHome %}
          <span class="brand-text">{{ metadata.title or "Quixotic" }}</span>
        {% endif %}
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/posts/">Posts</a>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">🌗</button>
      </nav>
    </div>
  </header>

  {{ content | safe }}


  <footer class="site-foot">
    <div class="container">
      <p>© {{ metadata.title or "Quixotic" }}</p>
    </div>
  </footer>

  {% include "components/backtotop.njk" %}
<link rel="stylesheet" href="/assets/css/backtotop.css">
<script defer src="/assets/js/backtotop.js"></script>


<script>
(function () {
  var key = "theme";
  var html = document.documentElement;
  var btn = document.getElementById("theme-toggle");
  function apply(v){ html.setAttribute("data-theme", v); }

  var stored = null;
  try { stored = localStorage.getItem(key); } catch(e){}
  apply(stored || "dark"); // default to dark

  if (btn) btn.addEventListener("click", function () {
    var cur = html.getAttribute("data-theme") || "dark";
    var next = (cur === "light") ? "dark" : "light";
    try { localStorage.setItem(key, next); } catch(e){}
    apply(next);
  });
})();
</script>
<script defer src="/assets/js/progress.js"></script>
</body>
</html>
